<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
	<t t-name="realty_bds.One2ManyFile">
		<div t-attf-class="oe_fileupload {{props.className || ''}}" aria-atomic="true">
			<!-- File Grid -->
			<div class="o_attachments photo-grid" t-attf-style="
          gap: {{props.gutter}}px;
          margin-top: {{props.gutter}}px;
        ">
				<t t-if="files.length &gt; 0">
					<t t-foreach="files" t-as="file" t-key="file.id">
						<div class="photo-tile" draggable="false" t-on-dragstart.stop="" role="button" aria-label="View file" t-on-click.stop="() =&gt; openLightbox(file.id)" t-attf-style="
                height: {{props.rowHeight}}px;
                flex: 0 1 auto;
								min-width: {{9/16 * props.rowHeight}}px;
              ">
							<div class="photo-tile-icons">
								<div class="right-icons">
									<a class="download-btn" t-att-href="file.url" t-att-download="file.name" data-tooltip="Download file" target="_blank" t-on-click.stop="">
										<i class="fa fa-download"/>
									</a>
								</div>
							</div>
							
							<t t-if="file.isImage">
								<img t-att-src="file.thumbnailUrl" t-att-alt="file.name" t-attf-style="height: 100%; width: auto; object-fit: cover;" draggable="false" />
							</t>
							<t t-else="">
								<div class="file-icon-wrapper">
									<img t-att-src="file.thumbnailUrl" t-att-alt="file.name" class="file-icon" draggable="false" />
									<span class="file-name-overlay" t-esc="file.name"/>
								</div>
							</t>
						</div>
					</t>
				</t>

				<t t-else="">
					<div class="text-muted p-3">No documents available</div>
				</t>
			</div>

			<!-- Lightbox -->
			<t t-if="state.lightboxIndex !== -1">
				<PhotoLightbox files="files" index="state.lightboxIndex" presentationImage="false" onClose="closeLightbox" onNavigate="navigateLightbox" readonly="true" />
			</t>
		</div>
	</t>
</templates>
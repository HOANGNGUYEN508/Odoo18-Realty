<odoo>
	<!-- Tree View User -->
	<record id="product_template_list_view" model="ir.ui.view">
		<field name="name">Product List</field>
		<field name="model">product.template</field>
		<field name="arch" type="xml">
			<list>
				<field name="is_favorite" widget="boolean_favorite" nolabel="1" optional="show"/>
				<button name="action_view_history" title="View Update History" type="object" icon="fa-history"/>
				<button name="action_schedule" title="Schedule" type="object" icon="fa-calendar" invisible="approval != 'approved'"/>
				<field name="status_id" string="Status" optional="show"/>
				<field name="type_id" string="Type" optional="show"/>
				<field name="land_title_id" string="Land Title" optional="show"/>
				<field name="address" string="Address" optional="show"/>
				<field name="attributes" string="Attributes" optional="show"/>
				<field name="display_price" string="Price" optional="show"/>
				<field name="price_per_sqm" string="Million/m²" optional="show"/>
				<field name="create_uid" string="Real Estate Owner" optional="show"/>
				<field name="feature_ids" string="Feature" widget="many2many_chip" options="{'maxVisible':3}" optional="show"/>
				<button name="action_make_report" title="Make Report" type="object" icon="fa-file-text-o" invisible="approval != 'approved'"/>
				<field name="company_id"/>
			</list>
		</field>
	</record>

	<!-- Form View User -->
	<record id="product_template_form_view" model="ir.ui.view">
		<field name="name">Product Form</field>
		<field name="model">product.template</field>
		<field name="arch" type="xml">
			<form>
				<sheet>
					<field name="currency_id" invisible="1"/>
					<group>
						<group string="Address">
							<!-- <div class="o_form_label fw-bold text-black text-center">Address</div> -->
							<field id="field_province" name="province_id" widget="selection" autocomplete="off" domain="[('country_id.code', '=', 'VN')]" readonly="approval == 'pending'"/>
							<field id="field_district" name="district_id" widget="selection" domain="[('province_id', '=', province_id)]" autocomplete="off" readonly="approval == 'pending'"/>
							<field id="field_commune" name="commune_id" widget="selection" domain="[('district_id', '=', district_id)]" autocomplete="off" readonly="approval == 'pending'"/>
							<field id="field_house_number" name="house_number" autocomplete="off" readonly="approval == 'pending'"/>
							<field id="field_street" name="street" autocomplete="off" readonly="approval == 'pending'"/>
							<field id="field_region" name="region_id" widget="selection" domain="[('province_ids', 'in', province_id)]" autocomplete="off" readonly="approval == 'pending'"/>
						</group>
						<group string="Information">
							<!-- <div class="o_form_label fw-bold text-black text-center">Information</div> -->
							<div class="o_row">
								<div class="o_form_label fw-bold text-black">Price</div>
								<field id="field_list_price" name="list_price" widget="monetary" options="{'currency_field': 'currency_id'}" autocomplete="off" readonly="approval == 'pending'"/>
								<div class="o_form_label fw-bold text-black">Unit</div>
								<field name="unit_price_id" widget="selection" required="1" readonly="approval == 'pending'"/>
							</div>
							<field id="field_status" name="status_id" widget="selection" autocomplete="off" readonly="approval == 'pending'"/>
							<field id="field_type" name="type_id" widget="selection" autocomplete="off" readonly="approval == 'pending'"/>
							<field id="field_land_title" name="land_title_id" widget="selection" autocomplete="off" readonly="approval == 'pending'"/>
							<field id="field_feature" name="feature_ids" widget="many2many_tags" autocomplete="off" options="{'no_create': True}" readonly="approval == 'pending'"/>
						</group>
						<group string="Attributes">
							<!-- <div class="o_form_label fw-bold text-black text-center">Attributes</div> -->
							<field id="field_real_estate_area" name="real_estate_area" autocomplete="off" readonly="approval == 'pending'"/>
							<field id="usable_area" name="usable_area" autocomplete="off" readonly="approval == 'pending'"/>
							<field id="field_number_of_floors" name="number_of_floors" autocomplete="off" readonly="approval == 'pending'"/>
							<field id="field_frontage" name="frontage" autocomplete="off" readonly="approval == 'pending'"/>
							<field id="field_home_direction" name="home_direction_id" widget="selection" autocomplete="off" readonly="approval == 'pending'"/>
						</group>
						<group string="Additional Information">
							<field name="shared_user_ids" widget="many2many_tags" options="{'no_create': True}" readonly="approval == 'pending'"/>
							<field name="shared_company_ids" widget="many2many_tags" options="{'no_create': True}" readonly="approval == 'pending'"/>
						</group>
					</group>
					<group string="Public Images">
						<field name="img_ids" widget="many2many_image" readonly="approval == 'pending'" options="{
								'number_of_files': 5, 
								'accepted_file_extensions': '.png,.jpg,.jpeg,.gif,.webp', 
								'presentation_image': True,
								'is_public': True
							}" />
					</group>
					<group string="Private Images">
						<field name="private_img_ids" widget="many2many_image" readonly="approval == 'pending'" options="{
								'number_of_files': 5, 
								'accepted_file_extensions': '.png,.jpg,.jpeg,.gif,.webp', 
								'presentation_image': False,
								'is_public': False
							}" />
					</group>
					<group string="Actions">
						<field name="approval" readonly="1" widget="statusbar" options="{'clickable': 0}"/>
						<field name="moderator_id" string="Moderator" readonly="1" invisible="approval == 'draft'" widget="many2one_avatar_user"/>
						<field name="edit_counter" readonly="1" invisible="edit_counter == -1"/>
						<div class="o_row">
							<button name="action_send" string="Send" type="object" class="btn-primary" invisible="edit_counter != -1 or approval != 'draft'" groups="realty_bds.access_group_seen_product,realty_bds.access_group_full_product,realty_bds.access_group_realty_product"/>
							<button name="action_resend" string="Resend" type="object" class="btn-primary" invisible="edit_counter == -1 or edit_counter == 0" groups="realty_bds.access_group_seen_product,realty_bds.access_group_full_product,realty_bds.access_group_realty_product"/>
							<button name="action_schedule" class="btn-primary" invisible="approval != 'approved'" type="object" groups="realty_bds.access_group_seen_product,realty_bds.access_group_full_product,realty_bds.access_group_realty_product">
								<i class="fa fa-calendar me-1" aria-hidden="true"/>
								<span>Schedule</span>
							</button>
							<button name="action_make_report" class="btn-primary" invisible="approval != 'approved'" type="object" groups="realty_bds.access_group_seen_product,realty_bds.access_group_full_product,realty_bds.access_group_realty_product">
								<i class="fa fa-file-text-o me-1" aria-hidden="true"/>
								<span>Make Report</span>
							</button>
							<button name="action_remove" class="btn-primary" type="object" invisible="approval != 'approved'" groups="realty_bds.access_group_mod_product,realty_bds.access_group_realty_product">
								<i class="fa fa-times me-1" aria-hidden="true"/>
								<span>Remove</span>
							</button>
						</div>
					</group>
				</sheet>
				<chatter/>
			</form>
		</field>
	</record>

	<!-- Kanban View User -->
	<record id="product_template_kanban_view" model="ir.ui.view">
		<field name="name">Product Kanban User</field>
		<field name="model">product.template</field>
		<field name="arch" type="xml">
			<kanban template="card" class="o_kanban_view">
				<field name="name"/>
				<field name="presentation_image_id"/>
				<field name="is_favorite"/>
				<field name="create_uid"/>
				<field name="create_date"/>
				<field name="approval"/>
				<field name="moderated_on"/>
				<field name="moderator_id"/>
				<field name="reason"/>
				<templates>
					<t t-name="card">
						<div class="oe_product_kanban d-flex flex-column justify-content-center">
							<!-- Header row: star on left, buttons on right -->
							<div class="d-flex justify-content-between align-items-center w-100 mb2">
								<!-- Favorite star -->
								<field name="is_favorite" widget="boolean_favorite" nolabel="1" t-att-style="'color: #7e6dae;'" />
								<!-- Action buttons -->
								<div class="o_kanban_action_buttons">
									<button name="action_view_history" type="object" icon="fa-history" title="View Update History" class="btn btn-sm" t-att-style="'color: #7e6dae;'" />
									<button name="action_schedule" type="object" icon="fa-calendar" title="Schedule" class="btn btn-sm" t-att-style="'color: #7e6dae;'" />
									<button name="action_make_report" type="object" icon="fa-file-text-o" title="Make Report" class="btn btn-sm" t-att-style="'color: #7e6dae;'" />
								</div>
							</div>

							<!-- Header: avatar + name + datetime -->
							<div class="d-flex align-items-center mb-2 header_notify" t-att-data-approval="record.approval.raw_value or ''">
								<!-- Avatar -->
								<t t-if="record.create_uid">
									<img t-att-src="'/web/image_protected?model=res.users&amp;id=' + record.create_uid.raw_value + '&amp;field=avatar_128'" alt="avatar" class="o_post_avatar avatar_notify" />
								</t>
								<div class="flex-grow-1 d-flex flex-column">
									<div class="fw-bold">
										<t t-esc="record.create_uid and record.create_uid.value or '—'"/>
									</div>
									<div class="small text-muted">
										<t t-esc="record.create_date and record.create_date.value or '—'"/>
									</div>
								</div>
							</div>

							<!-- Title row -->
							<div class="o_kanban_record_title mb4 w-100 align-items-center" style="word-wrap: break-word; text-align: left;">
								<field name="name"/>
							</div>

							<!-- Image container -->
							<div class="d-flex justify-content-center align-items-center" style="width: 100%; height: 150px; aspect-ratio: 16/9;">
								<img t-att-src="
                    record.presentation_image_id.raw_value 
                    ? '/web/content_protected/' + record.presentation_image_id.raw_value + '?model=product.template&amp;field=img_ids'
                    : '/web/static/img/placeholder.png'
									" class="img-fluid" style="max-height: 100%; object-fit: contain;" alt="Product Image" />
							</div>

							<t t-if="record.approval and (record.approval.raw_value == 'rejected' or record.approval.raw_value == 'removed')">
								<i class="fa fa-times me-1" aria-hidden="true"/>
								<span class="badge_rejected" t-esc="record.approval.raw_value"/>
							</t>

							<!-- Reason to reject or remove post -->
							<t t-if="record.approval and (record.approval.raw_value == 'rejected' or record.approval.raw_value == 'removed')">
								<div class="o_rejection_container mt-3 p-3">
									<div class="d-flex align-items-center mb-2">
										<!-- Avatar -->
										<t t-if="record.moderator_id">
											<img t-att-src="'/web/image_protected?model=res.users&amp;id=' + record.moderator_id.raw_value + '&amp;field=avatar_128'" alt="avatar" class="o_post_avatar avatar_notify" />
										</t>
										<div class="flex-grow-1 d-flex flex-column">
											<div class="fw-bold">
												<t t-esc="record.moderator_id and record.moderator_id.value or '—'"/>
											</div>
											<div class="small text-muted">
												<t t-esc="record.moderated_on and record.moderated_on.value or '—'"/>
											</div>
										</div>
									</div>

									<!-- Reason -->
									<div class="o_rejection_reason">
										<span class="fw-bold" t-esc="'Reason ' + record.approval.raw_value + ':'"/>
										<t t-esc="record.reason.value or 'No reason provided.'"/>
									</div>
								</div>
							</t>
						</div>
					</t>
				</templates>
			</kanban>
		</field>
	</record>

	<!-- Menu User -->
	<record id="action_product_template" model="ir.actions.act_window">
		<field name="name">Ware House</field>
		<field name="res_model">product.template</field>
		<field name="view_mode">list,form,kanban</field>
		<field name="domain">
		[
			'|', '|',
			'&amp;', ('company_id', 'in', allowed_company_ids), ('create_uid', '=', uid),
			'&amp;', ('company_id', '=', 1), ('approval', '=', 'approved'),
			'&amp;', '&amp;', ('company_id', 'in', allowed_company_ids), ('approval', '=', 'approved'), ('create_uid', '!=', uid)
  	]	
		</field>
		<field name="view_ids" eval="[
      (5, 0, 0),
      (0, 0, {
        'view_mode': 'kanban',
        'view_id': ref('realty_bds.product_template_kanban_view')
      }),
      (0, 0, {
        'view_mode': 'list',
        'view_id': ref('realty_bds.product_template_list_view')
      }),
      (0, 0, {
        'view_mode': 'form',
        'view_id': ref('realty_bds.product_template_form_view')
      })
    ]"/>
	</record>

	<!-- Form View Mod -->
	<record id="product_template_form_view_mod" model="ir.ui.view">
		<field name="name">Product Form</field>
		<field name="model">product.template</field>
		<field name="arch" type="xml">
			<form>
				<sheet>
					<field name="currency_id" invisible="1" readonly="1"/>
					<group>
						<group string="Address">
							<!-- <div class="o_form_label fw-bold text-black text-center">Address</div> -->
							<field id="field_province" name="province_id" widget="selection" autocomplete="off" domain="[('country_id.code', '=', 'VN')]" readonly="1"/>
							<field id="field_district" name="district_id" widget="selection" domain="[('province_id', '=', province_id)]" autocomplete="off" readonly="1"/>
							<field id="field_commune" name="commune_id" widget="selection" domain="[('district_id', '=', district_id)]" autocomplete="off" readonly="1"/>
							<field id="field_house_number" name="house_number" autocomplete="off" readonly="1"/>
							<field id="field_street" name="street" autocomplete="off" readonly="1"/>
							<field id="field_region" name="region_id" widget="selection" domain="[('province_ids', 'in', province_id)]" autocomplete="off" readonly="1"/>
						</group>
						<group string="Information">
							<!-- <div class="o_form_label fw-bold text-black text-center">Information</div> -->
							<div class="o_row">
								<div class="o_form_label fw-bold text-black">Price</div>
								<field id="field_list_price" name="list_price" widget="monetary" options="{'currency_field': 'currency_id'}" autocomplete="off" readonly="1"/>
								<div class="o_form_label fw-bold text-black">Unit</div>
								<field name="unit_price_id" widget="selection" required="1" readonly="1"/>
							</div>
							<field id="field_status" name="status_id" widget="selection" autocomplete="off" readonly="1"/>
							<field id="field_type" name="type_id" widget="selection" autocomplete="off" readonly="1"/>
							<field id="field_land_title" name="land_title_id" widget="selection" autocomplete="off" readonly="1"/>
							<field id="field_feature" name="feature_ids" widget="many2many_tags" autocomplete="off" options="{'no_create': True}" readonly="1"/>
						</group>
						<group string="Attributes">
							<!-- <div class="o_form_label fw-bold text-black text-center">Attributes</div> -->
							<field id="field_real_estate_area" name="real_estate_area" autocomplete="off" readonly="1"/>
							<field id="usable_area" name="usable_area" autocomplete="off" readonly="1"/>
							<field id="field_number_of_floors" name="number_of_floors" autocomplete="off" readonly="1"/>
							<field id="field_frontage" name="frontage" autocomplete="off" readonly="1"/>
							<field id="field_home_direction" name="home_direction_id" widget="selection" autocomplete="off" readonly="1"/>
						</group>
						<group string="Additional Information">
							<field name="shared_user_ids" widget="many2many_tags" options="{'no_create': True}" readonly="1"/>
							<field name="shared_company_ids" widget="many2many_tags" options="{'no_create': True}" readonly="1"/>
						</group>
					</group>
					<group string="Public Images">
						<field name="img_ids" widget="many2many_image" readonly="1" options="{
								'number_of_files': 5, 
								'accepted_file_extensions': '.png,.jpg,.jpeg,.gif,.webp', 
								'presentation_image': False,
								'is_public': True
							}" />
					</group>
					<group string="Private Images">
						<field name="private_img_ids" widget="many2many_image" readonly="1" options="{
								'number_of_files': 5, 
								'accepted_file_extensions': '.png,.jpg,.jpeg,.gif,.webp', 
								'presentation_image': False,
								'is_public': False
							}" />
					</group>
					<group string="Actions">
						<field name="approval" readonly="1" widget="statusbar" options="{'clickable': 0}"/>
						<field name="moderator_id" string="Moderator" readonly="1" widget="many2one_avatar_user"/>
						<field name="edit_counter" readonly="1" invisible="edit_counter == -1"/>
						<button name="action_approve" invisible="approval != 'pending'" type="object" class="btn btn-sm btn-outline-success d-flex align-items-center">
							<i class="fa fa-check me-1" aria-hidden="true"/>
							<span>Approve</span>
						</button>
						<button name="action_reject" invisible="approval != 'pending'" type="object" class="btn btn-sm btn-outline-danger d-flex align-items-center">
							<i class="fa fa-times me-1" aria-hidden="true"/>
							<span>Reject</span>
						</button>
					</group>
				</sheet>
				<chatter/>
			</form>
		</field>
	</record>

	<!-- Menu Mod -->
	<record id="action_product_template_queue" model="ir.actions.act_window">
		<field name="name">Ware House [Queue]</field>
		<field name="res_model">product.template</field>
		<field name="view_mode">form,kanban</field>
		<field name="domain">[('approval', '=', 'pending')]</field>
		<field name="context">{'create': False}</field>
		<field name="view_ids" eval="[
      (5, 0, 0),
      (0, 0, {
        'view_mode': 'kanban',
        'view_id': ref('realty_bds.product_template_kanban_view')
      }),
      (0, 0, {
        'view_mode': 'form',
        'view_id': ref('realty_bds.product_template_form_view_mod')
      })
    ]"/>
	</record>
</odoo>
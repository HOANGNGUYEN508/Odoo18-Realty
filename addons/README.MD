Ho√†ng: ph√¢n t√≠ch v√† thi·∫øt k·∫ø h·ªá th·ªëng.

‚≠êÔ∏è Spring 1:

    - Th√™m c√°c list model:
        + Hi·∫øu:
            * M·ª•c ƒë√≠nh mua.
            * ƒê·∫∑c ƒëi·ªÉm BDS.
        + Kh·∫£i:
            * Ch·ª©c danh.
            * Ph√¢n Quy·ªÅn Ch·ª©c Danh.
        + Huy:
            * H∆∞·ªõng Nh√†.
            * Group H∆∞·ªõng Nh√†.
            * Khu v·ª±c.
            * T·ªânh/TP.
            * Ph∆∞·ªùng/x√£.
            * Qu·∫≠n/huy·ªán.
        + Ho√†ng:
            * Hi·ªán Tr·∫°ng.
            * Tag.
            * Lo·∫°i H√¨nh.
            * Policy.
    - T·∫°m th·ªùi kh√¥ng ƒë·ªÉ √Ω ƒë·∫øn link gi·ªØa module nh·ªè v√† l·ªõn nh∆∞ng ph·∫£i link FK gi·ªØa c√°c list module n·∫øu c√≥.

üåü B√°o c√°o - Spring 1:

    - Hi·∫øu:
        + M·ª•c ƒë√≠nh mua. ‚úÖ
        + ƒê·∫∑c ƒëi·ªÉm BDS. ‚úÖ
    - Kh·∫£i:
        + Ch·ª©c danh. ‚úÖ
        + Ph√¢n Quy·ªÅn Ch·ª©c Danh. ‚úÖ
    - Huy:
        + H∆∞·ªõng Nh√†. ‚úÖ
        + Group H∆∞·ªõng Nh√†. ‚úÖ
        + Khu v·ª±c, T·ªânh/TP, Ph∆∞·ªùng/x√£, Qu·∫≠n/huy·ªán. ‚ùå
    - Ho√†ng:
        + Hi·ªán Tr·∫°ng. ‚úÖ
        + Tag. ‚úÖ
        + Lo·∫°i H√¨nh. ‚úÖ
        + Policy. ‚úÖ

‚≠êÔ∏è Spring 2:

    - Models:
        + User: Huy + Kh·∫£i.
        + Product: Hi·∫øu + Ho√†ng.
    - Tasks:
        + Giao Di·ªán: Views.
            * Admin: c·∫•p cao -> th·∫•p.
            * User: ·ª®ng vi√™n, chuy√™n vi√™n, ƒë·∫ßu ch·ªß, tr∆∞·ªüng ph√≤ng , tr·ª£ l√Ω.
        + Backend
            * Th√™m c√°c tr∆∞·ªùng d·ªØ li·ªáu.
            * ·∫®n nh·ªØng ch·ª©c nƒÉng v√† tr∆∞·ªùng d·ªØ li·ªáu ko li√™n quan.
            * Ph√¢n quy·ªÅn.
            * Thao t√°c: Method.
        + Link model - k·∫øt n·ªëi FK: k·∫øt n·ªëi FK gi·ªØa c√°c list model nh·ªè v√† module l·ªõn.

üåü B√°o c√°o - Spring 2:

      - Company Isolation: Ng∆∞·ªùi d√πng t·ª´ c√°c c√¥ng ty kh√°c ch·ªâ c√≥ th·ªÉ t∆∞∆°ng t√°c v·ªõi d·ªØ li·ªáu c·ªßa ri√™ng h·ªç, nh∆∞ng v·∫´n c√≥ th·ªÉ ƒë·ªçc d·ªØ li·ªáu g·ªëc c·ªßa c√¥ng ty c∆° s·ªü; h·ªç kh√¥ng th·ªÉ t·∫°o, c·∫≠p nh·∫≠t ho·∫∑c x√≥a (CUD) d·ªØ li·ªáu ƒë√≥.
      - M·ªçi model trong module realty_bds s·∫Ω c√≥ 2 view c∆° b·∫£n: list, form
      - Huy:
          + Khu v·ª±c, T·ªânh/TP, Ph∆∞·ªùng/x√£, Qu·∫≠n/huy·ªán. ‚úÖ
          + Chuy·ªÉn T·ªânh/TP t·ª´ model t·ª± t·∫°o sang s·ª≠ d·ª•ng model res.country.state c·ªßa Odoo.
          + T√°ch T·ªânh/TP, Ph∆∞·ªùng/x√£, Qu·∫≠n/huy·ªán sang th√†nh module h√†nh ch√≠nh Vi·ªát Nam.
      - Kh·∫£i:
          + Ch·ªânh s·ª≠a model res.users, res.partner, res.company.
          + signup: ch·ªânh s·ª≠a sign_up template (xml + controller + js).
          + Th√™m v√† ch·ªânh s·ª≠a model hr.department c·ªßa odoo.
          + Th√™m data v√†o res.groups v·ªõi m·ªói model c·∫ßn ph√¢n quy·ªÅn.
          + Th√™m data v√†o ir.rule ·ª©ng v·ªõi m·ªói group trong data th√™m v√†o res.groups ƒë·ªÉ ƒë·∫°t ƒë∆∞·ª£c Company Isolation.
          + Th√™m data v√†o ir.model.access.csv ·ª©ng v·ªõi m·ªói group.
          + Chuy·ªÉn model ch·ª©c danh sang s·ª≠ d·ª•ng hr.job c·ªßa odoo .
          + Th√™m wizard ƒë·ªÉ th√™m employee v√¥ department t·ª´ form view c·ªßa department
          + Th√™m wizard ƒë·ªÉ t·∫°o user c∆° b·∫£n v·ªõi ch·ª©c danh.
          + Chu·∫©n h√≥a code nh√°nh user -> merge source -> push l√™n main.
      - Ph∆∞∆°ng:
          + Ch·ªânh s·ª≠a trang c√° nh√¢n.
          + my_profile: th√™m t√≠nh nƒÉng ƒë·ªïi m·∫≠t kh·∫©u t·∫°i trang c√° nh√¢n (xml + js + css + controller).
      - Ho√†ng:
          + Th√™m model unit_price, land_tittle.
          + Th√™m v√† ch·ªânh s·ª≠a model product.template c·ªßa odoo, th√™m kanban view.
          + filter: Custom ho√†n to√†n filter m·ªõi thay cho filter truy·ªÅn th·ªëng c·ªßa odoo b·ªüi filter n√†y kh√≥ s·ª≠ d·ª•ng cho nh·ªØng ng∆∞·ªùi kh√¥ng th·∫°o v·ªõi m√°y t√≠nh. Nh·ªØng t√≠nh nƒÉng c·ªßa filter:
              * Ch·ªçn tr∆∞·ªùng v·ªõi nh·ªØng dropdown c·ªßa many2one ho·∫∑c many2many, ƒëi·ªÅn tr∆∞·ªùng v·ªõi 2 input field (max price, min price) -> nh·∫•n Apply Filters ƒë·ªÉ l·ªçc domain c·ªßa view (list ho·∫∑c kanban), nh·∫•n Reset ƒë·ªÉ domain c·ªßa view v·ªÅ ban ƒë·∫ßu.
              * Th√™m model method v√†o ir.filters ƒë·ªÉ ng∆∞·ªùi d√πng c√≥ th·ªÉ l∆∞u preference c·ªßa filter hi·ªán t·∫°i, c√≥ th·ªÉ ch·ªçn ƒë·ªÉ l·ªçc theo nh·ªØng tr∆∞·ªùng ƒë√£ l∆∞u. C√≥ th·ªÉ ch·ªçn preference l√† default filter ƒë·ªÉ ngay khi v·ª´a v√†o view s·∫Ω load domain c·ªßa default filter. C√≥ th·ªÉ x√≥a b·∫•t k√¨ preference n√†o ƒë√£ l∆∞u ngay t·∫°i dropdown ch·ªçn preference.
              * Thay th·∫ø odoo search_bar b·∫±ng tag field - khi nh·∫•n Apply Filters, nh·ªØng tr∆∞·ªùng ƒë∆∞·ª£c l·ªçc s·∫Ω xu·∫•t hi·ªán d∆∞·ªõi d·∫°ng c√°c tag, c√≥ th·ªÉ lo·∫°i b·ªè c√°c tag khi nh·∫•n v√†o x b√™n ph·∫£i ch√∫ng v√† khi ·∫•y domain s·∫Ω d∆∞·ª£c filter t∆∞∆°ng ·ª©ng. Tag s·∫Ω ch·ªâ c√≥ 1 lo·∫°i duy nh·∫•t xu·∫•t hi·ªán, 1 l√† preference tag hay l√† tag cho c√°c tr∆∞·ªùng l·∫ª.
          + photo_lightbox: custom component ƒë·ªÉ s·ª≠ d·ª•ng cho many2many_image - d√πng ƒë·ªÉ xem h√¨nh ·∫£nh v·ªõi k√≠ch th∆∞·ªõc nguy√™n b·∫£n c·ªßa ch√∫ng; c√≥ nh·ªØng ch·ª©c nƒÉng set ·∫£nh ƒë·∫°i di·ªán, download v√† delete ·∫£nh. Kh√¥ng th·ªÉ d√πng t√≠nh nƒÉng k√©o th·∫£ ·∫£nh khi lightbox ƒëang hi·ªán di·ªán.
          + validated_file_input: n√¢ng c·∫•p component fileinput c·ªßa odoo ƒë·ªÉ support t√≠nh nƒÉng k√©o th·∫£ ·∫£nh d√πng cho many2many_image. Th√™m t√≠nh nƒÉng validata file - ch·ªâ ch·∫•p nh·∫≠n file d·∫°ng image, t·ªëi ƒëa 5 b·ª©c ·∫£nh d∆∞·ª£c upload m·ªói b·∫•t ƒë·ªông s·∫£n (ex: upload 7 file - file th·ª© 4 g·∫∑p v·∫•n ƒë·ªÅ -> ch·∫•p nh·∫≠n file 1 - 3, 5 v√† 6; b·ªè file th·ª© 4 do bi l·ªói v√† th·ª© 7 do v∆∞·ª£t qu√° s·ªë l∆∞·ª£ng cho ph√©p), t·ªëi ƒëa 5 MB m·ªói file upload.
          + Custom field widget:
              * many2many_chip: thay th·∫ø field widget many2many_tags c·ªßa odoo nh∆∞ng ch·ªâ l√† readonly, s·ª≠ d·ª•ng trong list view c·ªßa product.template v√† filter b√™n tr√™n. Name c·ªßa nh·ªØng ·∫£nh upload l√™n s·∫Ω ƒë∆∞·ª£c hash l·∫°i th√¥ng qua s·ª± k·∫øt h·ª£p c·ªßa controller v√† tr∆∞·ªùng ƒë∆∞·ª£c c√†i v√†o ir.config_parameter.
              * many2many_image: n√¢ng c·∫•p many2many_binary c·ªßa odoo v·ªõi vi·ªác tr√¨nh b√†y h√¨nh ·∫£nh ƒë∆∞·ª£c upload c·ª• th·ªÉ ƒë∆∞·ªõi d·∫°ng scale nh·ªè c·ªßa ch√∫ng. User c√≥ th·ªÉ set ·∫£nh ƒë·∫°i di·ªán trong s·ªë nh·ªØng ·∫£nh upload l√™n ƒë·ªÉ th·∫ª kanban s·∫Ω s·ª≠ d·ª•ng ·∫£nh ƒë√≥ l√†m ƒë·∫°i di·ªán cho b·∫•t d·ªông s·∫£n. Th√™m t√≠nh nƒÉng k√©o th·∫£ ·∫£nh v√†o √¥ tr√¨nh b√†y ·∫£nh ƒë·ªÉ upload.
          + Th√™m:
              * 1 v√†i tr∆∞·ªùng v√†o nh·ªØng model b√™n nh√°nh user.
              * constrain v√†o nh·ªØng model c·ªßa module h√†nh ch√≠nh Vi·ªát Nam.
              * data cho hr.job: t·∫°o ra 2 ch·ª©c danh l√† Realty Super User (v·ªõi quy·ªÅn h·∫°n v·ªÅ c∆° b·∫£n l√† super user c·ªßa odoo ƒë·ªÉ kh√¥ng ph·∫£i ƒëƒÉng nh·∫≠p v√¥ h·ªá th·ªëng v·ªõi vai tr√≤ l√† super user) v√† admin thu·ªôc base company (ch·ªâ quy·ªÅn ƒëi·ªÅu h√†nh nh·ªØng attribute model cho b·∫•t ƒë·ªông s·∫£n).
              * data cho res.users: ngay l·∫≠p t·ª©c g√°n ch·ª©c danh Realty Super User cho user v·ªõi id l√† 2. Note: b·ªüi nh·ªØng rule th√™m v√†o ir.rule v√† ir.model.access.csv, administrator ngay l·∫≠p t·ª©c b·ªã kh√≥a kh·ªèi vi·ªác t∆∞∆°ng t√°c v·ªõi c√°c model, bao g·ªìm c·∫£ vi·ªác t∆∞∆°ng t√°c v·ªõi hr.job d·∫´n ƒë·∫øn kh√≥a trong kh√≥a v√† ph·∫£i gi·∫£i quy·∫øt b·∫±ng vi·ªác ƒëƒÉng nh·∫≠p v·ªõi t∆∞ c√°ch l√† super user.
              * data cho unit_price: billion v√† million ƒë·ªÉ d√πng ngay l·∫≠p t·ª©c.
          + S·ª≠a:
              * Override create, write method c·ªßa res.users v√† hr.employee.
              * data c·ªßa res.groups, ir.rule, ir.model.access.csv ƒë·ªÉ c√≥ th·ªÉ ho√†n to√†n ƒë·∫°t ƒë∆∞·ª£c t√≠nh nƒÉng company isolation (ph·∫ßn Kh·∫£i ch·ªâ c√≥ khi·∫øn ng∆∞·ªùi c·ªßa c√¥ng ty t∆∞∆°ng t√°c v·ªõi record c·ªßa c√¥ng ty).
          + Chu·∫©n h√≥a code nh√°nh product + code c·ªßa Ph∆∞∆°ng -> merge source -> push l√™n main.

üåü B√°o c√°o - Spring 3:

      - Ho√†ng:
          + Th√™m ch·ª©c nƒÉng ƒë·ªÉ ng∆∞·ªùi t·∫°o ra record c·ªßa real estate s·∫Ω c√≥ quy·ªÅn quy·∫øt ƒë·ªãnh c√° nh√¢n ho·∫∑c to√†n b·ªô c√° nh√¢n thu·ªôc c√¥ng ty kh√°c c√≥ quy·ªÅn xem record c·ªßa m√¨nh.
          + Th√™m t√≠nh nƒÉng readonly v√† presentationImage v√†o many2many_image v√† photo_lightbox (do t√≠nh nƒÉng set ·∫£nh ƒë·∫°i di·ªán l√† custom ri√™ng cho product.template, d√πng widget cho m·∫•y field kh√°c kh√¥ng c√≥ s·ª≠ d·ª•ng).
          + Th√™m model: owner_feedback, client_feedback, product_report.
          + Th√™m views v√† menu cho nh·ªØng model m·ªõi.
          + Ho√†n thi·ªán model action (xem l·ªãch s·ª≠ thay ƒë·ªïi, ƒë·∫∑t l·ªãch h·∫πn, l√†m report) c·ªßa product.template.
          + S·ª≠a override create t·∫°i res.users: khi t·∫°o user m·ªõi s·∫Ω block ƒëi nh·ªØng quy·ªÅn c∆° b·∫£n m√† odoo t·ª± g√°n -> ki·ªÉm so√°t ho√†n to√†n th√¥ng qua h·ªá th·ªëng ph√¢n quy·ªÅn ·ª©ng v·ªõi ch·ª©c danh c·ªßa realty_bds.
          + Th√™m h∆∞·ªõng d·∫´n archive record rule v·ªõi t√™n l√† 'Job multi company rule' sau khi install module realty_bds: rule m·∫∑c ƒë·ªãnh c·ªßa odoo khi·∫øn cho user kh√¥ng t·∫°o job title cho company kh√°c company m·∫∑c ƒë·ªãnh c·ªßa m√¨nh. Do ƒë√£ ki·ªÉm so√°t ch·∫∑t ch·∫Ω th√¥ng qua c∆° ch·∫ø assign job_title ƒë·ªÉ c√≥ quy·ªÅn n√™n kh√¥ng c·∫ßn thi·∫øt.
          + S·ª≠a l·ªói ch√≠nh t·∫£.
          + S·ª≠a sql_constraints kh·∫Øp c√°c model.
          + C·∫•u tr√∫c l·∫°i folder: g·ªôp c√°c file ..._menu.xml l·∫°i v·ªõi nhau. T·∫°o folder menu g·ªìm c√°c file l√† menu ch√≠nh v√† c√°c sub-menu c·ªßa menu ch√≠nh. T·∫°o folfer templates d√†nh cho override templates c·ªßa odoo.
          + C·∫•u tr√∫c l·∫°i file __manifest__.py ƒë·ªÉ d·ªÉ d√†ng th√™m th√¥ng tin sau n√†y.
          + Lo·∫°i b·ªè help kh·ªèi c√°c list model.
          + Th√™m abstract model notify: c√≥ ch·ª©c nƒÉng gi·ªëng nh∆∞ post c·ªßa facebook.
          + T·∫°o 4 model cho c√°c lo·∫°i post kh√°c nhau k·∫ø th·ª´a notify: congratulation, guideline, notification, urgent_buying.
          + Th√™m css cho notify.
          + Th√™m 3 groups ·ª©ng v·ªõi m·ªói model k·∫ø th·ª´a notify m·ªõi v·ªõi 8 rules m·ªói model ƒë·ªÉ ƒë·∫°t ƒë∆∞·ª£c logic:
            * Normal user c√≥ th·ªÉ read: post c·ªßa company c·ªßa user, approve post t·ª´ base company (company_id = 1), approve post b·ªüi c√°c user kh√°c c√πng company. Create post cho company c·ªßa user. Ch·ªâ edit post m√† user t·∫°o (v·∫´n thu·ªôc company m√† user hi·ªán t·∫°i thu·ªôc v·ªÅ) nh∆∞ng ch·ªâ khi edit_counter kh√°c 0. Ch·ªâ delete post m√† user t·∫°o (v·∫´n thu·ªôc company m√† user hi·ªán t·∫°i thu·ªôc v·ªÅ).
            * Moderator c√πng v·ªõi quy·ªÅn read m√† user c√≥, moderator c√≥ th·ªÉ read pending post ƒë∆∞·ª£c assigned cho h·ªç (moderator_id = user.id) thu·ªôc company hi·ªán t·∫°i c·ªßa h·ªç. Ch·ªâ edit nh·ªØng post hu·ªôc company hi·ªán t·∫°i c·ªßa h·ªç n·∫øu edit_counter != 0. Nh·ªØng quy·ªÅn n√†y l√† ƒë·ªÉ moderator approve post, s·∫Ω b·ªã gi·ªõi h·∫°n trong model.
          + Th√™m view: form, kanban cho user v√† kanban cho moderator v√† 2 action ƒë·ªÉ g·ªçi view (1 c√°i g·ªçi form + kanban cho user, 1 c√°i g·ªçi ch·ªâ kanban cho moderator).
          + Th√™m transient model notify_wizard ƒë·ªÉ ti·ªán th√™m l√Ω do khi t·ª´ ch·ªëi ho·∫∑c lo·∫°i b·ªè post.
          + Th√™m form view wizard cho notify_wizard.
          + Th√™m 2 model h·ªó tr·ª£ cho notify: remove_reason v√† reject_reason - nh·ªØng l·ª±a ch·ªçn c√≥ s·∫µn khi mu·ªën t·ª´ ch·ªëi/lo·∫°i b·ªè post ho·∫∑c l√† t·ª± ghi l√Ω do ri√™ng. moderator_guideline (list model) ƒë·ªÉ cho mod bi·∫øt ti√™u chu·∫©n ƒë√°nh gi√° post.
          + Th√™m list, form view cho 2 model remove_reason v√† reject_reason.
          + Th√™m model h·ªó tr·ª£ cho notify: moderator_guideline - list nh·ªØng quy t·∫Øc mod c·∫ßn tu√¢n th·ªß khi qu·∫£n l√Ω post.
          + Th√™m list, form view cho 2 model remove_reason v√† reject_reason.
          + T·∫°o js cho t√≠nh nƒÉng xem moderator_guideline t·∫°i kanban view c·ªßa congratulation, guideline, notification, urgent_buying. registry d∆∞·ªõi ki·ªÉu "views" ƒë·∫∑t t√™n l√† info_kanban ƒë·ªÉ c√≥ th·ªÉ d√πng cho tr∆∞·ªùng js_class c·ªßa kanban view (extend KanbanController ƒë·ªÉ th√™m button).
          + T·∫°o custom action (ir.actions.client) cho model realty_comment.
          + Format l·∫°i t·∫•t c·∫£ file python (tr·ªôn l·∫´n tab v√† space -> d√πng space: black formatter).
          + Override l·∫°i h√†m create ƒë·ªÉ b·∫Øt bu·ªôc company_id l√† company_id c·ªßa user hi·ªán t·∫°i ƒëang s·ª≠ d·ª•ng t√≠nh nƒÉng create, b·ªè s·ª≠ d·ª•ng default (c√≥ th·ªÉ b·ªã set sai khi import record).
          + Th√™m 1 button v√†o filter: favorite_list -> khi click s·∫Ω l·ªçc l·∫•y t·∫•t c·∫£ nh·ªØng product ƒë√£ ƒë∆∞·ª£c click favorite button widget -> button chuy·ªÉn sang tr·∫°ng th√°i k√≠ch ho·∫°t -> click l·∫°i l·∫ßn n·ªØa ƒë·ªÉ t·∫Øt.
          + Fix bug t·∫°i filter: d√πng sai tr∆∞·ªùng unit_price_units -> unit_prices.
          + Th√™m h∆∞·ªõng d·∫´n archive record rule v·ªõi t√™n l√† 'Product multi-company': ph√° v·ª° logic xem record product xuy√™n company c·ªßa realty_bds.
          + T·∫°o controller BinaryController sao ch√©p d·ª±a tr√™n controler Binary c·ªßa odoo 18: fetch img kh√¥ng c·∫ßn th√¥ng qua c√≥ set up 'allow companies' (res.users) ho·∫∑c 'is public document' (ir.attachment) ƒë·ªÉ c√≥ th·ªÉ xem img ƒë∆∞·ª£c g√°n v√†o record qua tr∆∞·ªùng many2many. C∆° ch·∫ø ho·∫°t ƒë·ªông: Ch·ªâ c·∫ßn user c√≥ quy·ªÅn read v·ªõi record m√† nh·ªØng img ƒë√≥ ƒë∆∞·ª£c g√°n v√†o th√¨ s·∫Ω c√≥ quy·ªÅn xem nh·ªØng img ·∫•y, ho·∫∑c s·∫Ω cho xem m√† kh√¥ng c·∫ßn b·∫•t c·ª© quy·ªÅn g√¨ n·∫øu nh∆∞ ng∆∞·ªùi t·∫°o ra attacment l√† ng∆∞·ªùi ƒëang xem.
          + Inherit model ir.attachment ƒë·ªÉ th√™m c√°c tr∆∞·ªùng: orphaned_date, orphaned_from_model, orphaned_from_res_id.
          + Override unlink c·ªßa product.template, product_report, notify ƒë·ªÉ sau khi record b·ªã delete th√¨ t√¨m t·∫•t c·∫£ attachment (trong tr∆∞·ªùng h·ª£p n√†y th√¨ t·∫•t c·∫£ ƒë·ªÅu l√† img) ƒë∆∞·ª£c g√°n v√†o c√πng v·ªõi record s·∫Ω set nh·ªØng tr∆∞·ªùng ƒë∆∞·ª£c th√™m m·ªõi c·ªßa c√°c attachment ƒë·ªÉ sau n√†y delete b·∫±ng model data_recycle.model.
          + S·ª≠a file 'data_recycle': th√™m 3 record m·ªõi v√† s·ª≠a 2 record c≈© theo logic m·ªõi s·ª≠a c·ªßa ir.attachment.
          + Th√™m h∆∞·ªõng d·∫´n v√†o file README.md: install module realty_bds xong t·∫Øt comment d√≤ng 'data/data_recycle.xml', c·ªßa 'data' trong file __manifest__.py r·ªìi restart server v√† upgrade l·∫°i module ƒë·ªÉ c√≥ t√≠nh nƒÉng t·ª± ƒë·ªông d·ªçn c√°c attachment kh√¥ng c√≤n ƒë∆∞·ª£c d√πng ƒë·∫øn.
          + Th√™m model permission_tracker ƒë·ªÉ h·ªó tr·ª£ cho model product.template, congratulation, guideline, notification, urgent_buying.
          + Th√™m view (list, form), data file, menuitem cho permission_tracker.
          + √Åp d·ª•ng @tools.ormcache v√†o nh·ªØng h√†m return data c·∫ßn d√πng nhi·ªÅu l·∫ßn.
          + Update c√°ch s·ª≠ d·ª•ng model policy. 
          + S·ª≠a code c·ªßa res.partner, res.company, ir.attachment. Th√™m 1 method m·ªõi l√† mark_true (attachment ƒë∆∞·ª£c upload th√¥ng qua many2many_images n·∫øu kh√¥ng save record l·∫°i s·∫Ω ƒë·ªÉ l·∫°i c√°c attachment v·ªõi data b·ªã khuy·∫øt - c√≥ res_model nh∆∞ng kh√¥ng thu·ªôc m2m c·ªßa b·∫•t k√¨ field n√†o -> gi·∫£i ph√°p: default gi√° tr·ªã c·ªßa orphaned_from_res_id l√† -1, override create sau khi t·∫°o ra see4 tr·ªè t·ªõi nh·ªØng attachment trong record m·ªõi t·∫°o ra v√† chuy·ªÉn orphaned_from_res_id v·ªÅ 0).
          + Th√™m 5 rule m·ªõi v√†o data_cycle data file, s·ª≠a c√°c rule c≈©.
          + S·ª≠a c√°c model c√≥ attachment d∆∞·ªõi d·∫°ng m2m: l√∫c tr∆∞·ªõc override unlink ƒë·ªÉ delete th√¨ mark c√°c attachment -> s·ª≠ d·ª•ng @api.ondelete (product_report, notify, product.template).
          + Th√™m h·ªá th·ªëng subscriber v√†o res.partner, l√†m toggle widget cho h·ªá th·ªëng n√†y: boolean_subscriber (g·∫ßn t∆∞∆°ng t·ª± nh∆∞ widget boolean_favorite c·ªßa odoo). Nh·ªØng user ƒë√£ subscribe t·ªõi 1 user kh√°c khi h·ªç post b√†i m·ªõi trong notify s·∫Ω ƒë∆∞·ª£c nh·∫≠n th√¥ng b√°o trong inbox t·∫°i discuss.
          + Optimzie ph∆∞∆°ng th·ª©c save_or_override_filter trong ir.filters.
          + Th√™m h·ªá th·ªëng approval v√† t·ª± ƒë·ªông assign moderator v√†o product.template, th√™m group moderator cho product.template (c√πng v·ªõi nh·ªØng quy·ªÅn v√† t√≠nh nƒÉng theo c√πng v·ªõi h·ªá th·ªëng n√†y).
          + Ch·ªânh s·ª≠a notify_wizard ƒë·ªÉ c√≥ th·ªÉ d√πng cho realty_comment. 
          + Th√™m ir.rule cho realty_comment: ng∆∞·ªùi t·∫°o ra comment c√≥ to√†n quy·ªÅn v·ªõi comment c·ªßa m√¨nh, moderator c√≥ quy·ªÅn remove comment c·ªßa ng∆∞·ªùi kh√°c. 
          + Th√™m ir.rule cho ir.attachment: nh·ªØng model s·ª≠ d·ª•ng attachemnt d∆∞·ªõi d·∫°ng m2m th√¨ moderator s·∫Ω ch·ªâ ƒë∆∞·ª£c xem c√°c attachment c·ªßa ng∆∞·ªùi kh√°c.
          + T·∫°o wizard model ƒë·ªÉ moderator remove comment v·ªõi l√Ω do: comment_wizard.
          + T·∫°o UI c·ªßa realty_comment ho√†n to√†n th√¥ng qua js ƒë·ªÉ optimize x·ª≠ l√Ω v√† t·ª± do c·ªßa UI: realty_comment_action, realty_comment_dialog, realty_comment_item. C√°ch ho·∫°t ƒë·ªông: notify k√≠ch ho·∫°t comment dialog qua action_open_comments - ir.actions.client v·ªõi tag realty_comment_dialog_action -> trigger action realty_comment_dialog_action -> g·ªçi env.services.dialog -> g·ªçi comment dialog.
            1. T·ªïng quan:
              * Model ch√≠nh: realty_comment ‚Äî h·ªó tr·ª£ nested (v√¥ h·∫°n) b·∫±ng _parent_name, _parent_store, parent_left/right/path, ondelete="cascade".
              * Multimodel via res_model, res_id (comment d√πng cho nhi·ªÅu model c·ªßa notify).
              * Tr∆∞·ªùng quan tr·ªçng: content, create_uid, like_user_ids, like_count, child_count, is_author, client_tmp_id (context), parent_id.
              * Validation: @api.constrains, override create, write, unlink ƒë·ªÉ b·∫Øt bu·ªôc client_tmp_id/create_or_reply cho create, sanitize content, check target t·ªìn t·∫°i.
            2. H·ªá th·ªëng optimistic updates (frontend):
              * T·∫°o tmp id: _makeTmpId() / javascript_makeTmpId() ‚Üí negative IDs: -(Date.now()*1000 + counter).
              * Optimistic insert (flow)
                > _optimisticInsert(payload, client_tmp_id): sinh tmpId, t·∫°o record t·∫°m:
                  {
                    id: tmpId,
                    client_tmp_id,
                    content,
                    create_uid: [userId, userName],
                    like_count: 0, child_count: 0,
                    create_date: new Date().toISOString(),
                    parent_id: payload.parent_id || null,
                    pending: true, temp: true
                  }
                  ch√®n v√†o repliesByParent[parentId] ho·∫∑c topLevel (page 0 ho·∫∑c last cached page n·∫øu page0 full).
                > l∆∞u undo meta v√†o _undoMap.
                > tr·∫£ v·ªÅ tmpId.
              * Reconcile khi server tr·∫£ v·ªÅ
                > _reconcileCreated(createdRaw, tmpId):
                  = l·∫•y real newId, merge data, x√≥a flags pending/temp.
                  = thay tmpId ‚Üí newId trong commentsById, topLevel, repliesByParent, page cache.
                  = replay queued actions _replayQueuedActions(tmpId, newId).
                  = cleanup c√°c map: _undoMap, _clientTmpIdToTmpId, _processedClientTmpIds.
              * Rollback khi l·ªói:
                > _rollbackOptimisticCreate(tmpId): x√≥a tmpId kh·ªèi commentsById, ph·ª•c h·ªìi v·ªã tr√≠ b·∫±ng _undoMap, c·∫≠p nh·∫≠t child_count, page cache, cleanup maps.
            3. Action Queue (x·ª≠ l√Ω actions tr√™n pending records):
              * Data structure: Map<tmpId, Array<Action>>
              * Action = {type: 'write'|'unlink'|'delete'|'call'|'create_child', payload, ts}
              * _enqueueAction(tmpId, action) ‚Äî add + set TTL cleanup (2 ph√∫t).
              * _replayQueuedActions(tmpId, realId) ‚Äî th·ª±c thi theo th·ª© t·ª±:
                > write ‚Üí orm.write(realId, {content:...})
                > unlink/delete ‚Üí orm.unlink(realId)
                > call ‚Üí g·ªçi method (v√≠ d·ª• action_toggle_like)
                > create_child ‚Üí t·∫°o reply
              * Use-case: ng∆∞·ªùi d√πng edit/like/delete tr∆∞·ªõc khi server confirm create.
            4. Page Cache:
              * pageCache: Map<pageNum, CacheMeta> 
                > CacheMeta = {ts, ids:[], comments: {id:...}, hasMore}
              * TTL = 30s (_pageCacheTTL)
              * Methods: _cacheSet, _cacheGet (return null n·∫øu expired), _clearPageCache, _replaceTmpInCache(tmpId, newId), _removeIdFromCacheMeta(id).
              * Cache invalidation: t·∫°o comment ‚Üí invalidate page0; delete ‚Üí remove from all pages; sort change ‚Üí resort in-place.
            5. Sorting:
              * Sort modes:
                > like (default): like_count DESC, create_date DESC
                > date_desc: create_date DESC, like_count DESC
                > date_asc: create_date ASC, like_count DESC
              * Implement b·∫±ng pure functions: _sortByLike(ids), _sortByDateLatest(ids), _sortByDateOldest(ids) (stable sort).
              * setSortMode(mode) ‚Üí c·∫≠p nh·∫≠t state.sortMode, resort topLevel, cached pages, repliesByParent.
              * Debounced re-sort khi like thay ƒë·ªïi: _maybeResortVisibleList(ids, idChanged, debounceMs=2000).
            6. Bus notifications (real-time):
              * Channel: realty_comment_{res_model}_{res_id}; subscribe in onWillStart(), unsubscribe in onWillUnmount().
              * Deduplication:
                > track _processedClientTmpIds set v√† _clientTmpIdToTmpId map; TTL 5s.
                > n·∫øu payload c√≥ client_tmp_id v√† c√≥ mapping ‚Üí g·ªçi _reconcileCreated.
              * Handled message types:
                > "create": n·∫øu own create ‚Üí reconcile; else _handleServerPushNew.
                > "parent_update": c·∫≠p nh·∫≠t child_count.
                > "update": _onCommentUpdated() merge.
                > "delete": _onCommentDeleted(id, parentId).
                > "absolute_delete": set state.absoluteDelete = true, ƒë√≥ng dialog, disable UI.
                > "like_toggle": c·∫≠p nh·∫≠t like_count, trigger debounced resort.
              * _handleServerPushNew(srv): add to commentsById, repliesByParent ho·∫∑c topLevel, insert v√†o page cache.
            7. Pagination & Replies:
              * Top-level pages
                > loadPage(page, {force=false}):
                  = n·∫øu cache valid v√† !force ‚Üí return cached.
                  = g·ªçi get_top_level_page().
                  = n·∫øu page r·ªóng ‚Üí fallback retry previous pages xu·ªëng t·ªõi 0.
                  = merge comments ‚Üí update topLevel, sort, cache, update maxPage.
                > loadNextPage() / loadPrevPage() guard hasMore / page>0.
              * Replies
                > loadRepliesFor(parentId, page=0, limit=5):
                > prevent concurrent via repliesMeta[parentId].loading.
                > g·ªçi get_replies_page(parentId, limit, offset).
                > Merge:
                  = serverIds = response
                  = busOnlyIds = local optimistic replies
                  = page 0: [...serverIds, ...busOnlyIds]
                  = else: append serverIds
                > update commentsById, repliesByParent[parentId], repliesMeta, showRepliesByParent[parentId]=true, repliesLoadedFromServer[parentId]=true.
              * toggleRepliesFor(parentId):
                > n·∫øu ƒë√£ visible ‚Üí hide; else if not repliesLoadedFromServer ‚Üí load from server (even khi c√≥ bus items); else just show.
              * loadMoreRepliesFor(parentId) ‚Üí next page.
            8. Excessive Nesting Mode:
              * Trigger: level === 4 && child_count > 0.
              * enterExcessiveMode(parentId):
                > l∆∞u excessivePrevPage, excessivePrevTopLevel.
                > set excessiveMode = true, excessiveParentId = parentId, topLevel = [parentId], page=0, hasMore=false.
                > loadRepliesFor(parentId,0,10), showRepliesByParent[parentId]=true.
                > UI: ·∫©n pager, show "Go back".
              * exitExcessiveMode() restore state.
            9. Top-level create & Reply flow:
              * createTopLevelComment():
                > guard absoluteDelete.
                > validate via _contentValidation(content,'create') ‚Üí _sanitizeContent.
                > client_tmp_id = _makeTmpId(); tmpId = _optimisticInsert(payload, client_tmp_id).
                > dedupe: _clientTmpIdToTmpId.set(client_tmp_id, tmpId); _processedClientTmpIds.add(client_tmp_id).
                > clear input, call orm.create('realty_comment', [payload], {context: {client_tmp_id, create_or_reply: 'create'|'reply'}}).
                > success ‚Üí _reconcileCreated(createdRaw, tmpId). error ‚Üí _rollbackOptimisticCreate(tmpId).
            10. Editing / Like / Delete (frontend):
              * Like:
                > pending record ‚Üí enqueue call action action_toggle_like, optimistic increment UI, skip server call.
                > normal record ‚Üí call orm.call('realty_comment','action_toggle_like',[id]), update UI with result.
                > throttle per comment 500ms.
              * Edit:
                > validate _validationRules, throttle 1000ms.
                > pending ‚Üí enqueue write, optimistic UI update.
                > normal ‚Üí orm.write('realty_comment',[id],{content}).
              * Delete:
                > owner: confirm dialog ‚Üí pending: remove optimistic + enqueue cancel_create; normal: orm.unlink.
                > moderator: open notify_wizard popup (context default_*), wizard calls unlink(reason) on backend ‚Üí backend sends removal notification to author.
            11. Backend workflow:
              * create(vals_list):
                > require client_tmp_id & create_or_reply in context.
                > _sanitize_content(), _check_content(), _check_target_exists().
                > super().create(vals_list).
                > update parent model comment_count (compute_comment_count).
                > push bus: type "create" for top-level or "parent_update" for reply (payload normalized _normalize_for_bus()).
              * write():
                > only allow update content (or skip custom logic if context "skip_custom_realty_write_logic" for like toggle).
                > validate target, sanitize, push bus "update".
              * unlink():
                > owner delete vs moderator delete (moderator requires reason).
                > validate target exists.
                > push bus "delete" (or "parent_update" for replies).
                > if moderator delete ‚Üí _send_removal_notification() (post to chatter + mail.notification).
                > allow bulk skip logic for absolute delete (post deleted) ‚Üí push "absolute_delete".
              * action_toggle_like():
                > check permission via permission_tracker.
                > write with context skip; push bus "like_toggle".
            12. Sanitization & Validation (backend)
              * _sanitize_content():
                > html.escape() + Unicode category-based allowlist: Letters (L*), Numbers (N*), punctuation (Pc,Pd,Po,Ps,Pe,Sm,Sc,Sk,So), allow emojis (So), block > > > control chars (Cc), private use (Co).
                > collapse whitespace \s+ ‚Üí single space, trim.
                > multilingual OK (VN, CN, AR, emojis).
              * _check_content():
                > not empty, ‚â§ 500 chars, not contain reserved words (from policy model).
              * _check_target_exists(), _check_parent_same_target().
            13. Security & Performance
              * XSS: backend html.escape, frontend _sanitizeContent, OWL templates use t-esc.
              * SQL injection: lu√¥n d√πng ORM.
              * Access control: record rules + permission_tracker groups.
              * Indexes: realty_comment_res_model_res_id_idx, unique comment_like_rel_unique_idx.
              * Rate limits ƒë·ªÅ xu·∫•t tr√™n infra; client-side throttle/debounce: likes 500ms, edits 1000ms, actionQueue TTL 2min, pageCache TTL 30s.
              * Error handling: rollback on failure, graceful fallback loading reserved words empty set n·∫øu call th·∫•t b·∫°i.